<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ã‡ekiliÅŸ Sonucu</title>
<meta name="color-scheme" content="dark light">
<style>
  :root{ --bg:#0b1020; --glass:#0f1733cc; --text:#ecf1ff; --muted:#a9b4d6; --primary:#5ea1ff; --border:1px solid rgba(255,255,255,.12); --radius:16px; --shadow:0 16px 40px rgba(0,0,0,.35), 0 4px 14px rgba(0,0,0,.25); }
  @media (prefers-color-scheme: light){ :root{ --text:#0b1020; --muted:#4b5563; --glass:#ffffffd9; --bg:#eef3ff; --border:1px solid rgba(0,0,0,.08); --shadow:0 18px 36px rgba(2,6,23,.08), 0 2px 10px rgba(2,6,23,.06);} }
  *{box-sizing:border-box} body{margin:0; color:var(--text); font:16px/1.5 ui-sans-serif,system-ui; background:#000 url('https://images.wallpapersden.com/image/download/world-of-warships-gaming-2023_bW5namiUmZqaraWkpJRmbmdlrWZlbWU.jpg') center/cover fixed no-repeat;}
  .overlay{position:fixed; inset:0; background: radial-gradient(1000px 600px at 20% 10%, rgba(0,0,0,.45), transparent 60%), linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55)); pointer-events:none;}
  .wrap{max-width:720px; margin:min(6vh,64px) auto; padding:20px}
  .card{background:var(--glass); border:var(--border); border-radius:var(--radius); box-shadow:var(--shadow); backdrop-filter:blur(10px) saturate(120%); overflow:hidden}
  header{padding:16px 18px; border-bottom:var(--border); display:flex; align-items:center; justify-content:space-between}
  h1{margin:0; font-size:clamp(22px,3vw,30px)}
  main{padding:18px; display:grid; gap:14px}
  .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .field{position:relative; flex:1}
  input{width:100%; padding:14px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.1); background:color-mix(in oklab, var(--glass) 92%, transparent); color:var(--text); outline:none}
  input:focus{box-shadow:0 0 0 3px color-mix(in oklab, var(--primary) 35%, transparent)}
  .btn{border:var(--border); background:linear-gradient(180deg, color-mix(in oklab, var(--primary) 18%, var(--glass)) 0%, var(--glass) 80%); color:var(--text); padding:12px 16px; border-radius:12px; cursor:pointer; box-shadow:var(--shadow); min-height:44px}
  .muted{color:var(--muted)}
  .result{border:var(--border); border-radius:12px; padding:14px; background:color-mix(in oklab, var(--glass) 96%, transparent)}
  .ok{border:1px solid #34d399aa; background:color-mix(in oklab, #34d399 10%, var(--glass))}
  .warn{border:1px solid #f59e0baa; background:color-mix(in oklab, #f59e0b 10%, var(--glass))}
  .err{border:1px solid #ff6b6baa; background:color-mix(in oklab, #ff6b6b 10%, var(--glass))}
  footer{padding:14px 18px; border-top:var(--border); display:flex; justify-content:space-between; align-items:center}
</style>
</head>
<body>
<div class="overlay" aria-hidden="true"></div>
<div class="wrap">
  <div class="card">
    <header><h1>Ã‡ekiliÅŸ Sonucu</h1><a class="btn" href="index.html">Forma DÃ¶n</a></header>
    <main>
      <div class="row"><div class="field"><input id="code" placeholder="ABCD-2345" autocomplete="one-time-code"></div><button class="btn" id="checkBtn">Sorgula</button></div>
      <div class="muted">E-postana gelen benzersiz kodu gir.</div>
      <div id="out" class="result muted">Beklemedeâ€¦</div>
    </main>
    <footer><span class="muted">HARP â€¢ Velour</span><a class="muted" href="https://www.youtube.com/@mwharp" target="_blank" rel="noopener noreferrer">@mwharp</a></footer>
  </div>
</div>
<script>
const BASE = "https://spring-dream-b90b.velour662.workers.dev";
const CHECK = BASE + "/check";
const out = document.getElementById("out");
const codeInput = document.getElementById("code");
document.getElementById("checkBtn").onclick = run;
const q = new URL(location.href).searchParams.get("code"); if (q){ codeInput.value=q; run(); }

async function run(){
  const code = codeInput.value.trim();
  if (!code) return show("Kod gerekli.", "err");
  show("SorgulanÄ±yorâ€¦");
  try{
    const r = await fetch(CHECK + "?code=" + encodeURIComponent(code));
    const j = await r.json();
    if (!j.ok) return show(j.error || "Hata", "err");
    const st=j.raffle, res=j.result;
    if (st.beforeStart) return show("Ã‡ekiliÅŸ henÃ¼z baÅŸlamadÄ±.", "warn");
    if (!st.afterEnd && !st.closed){
      if (res.winner) show("KazandÄ±n! ðŸŽ‰ Resmi duyuru bitiÅŸte.", "ok");
      else show("Ã‡ekiliÅŸ devam ediyor; sonuÃ§lanmadÄ±.", "");
      return;
    }
    show(res.winner ? "KAZANDIN! ðŸŽ‰ðŸŽ‰ Tebrikler!" : "ÃœzgÃ¼nÃ¼z, bu kez olmadÄ±.", res.winner?"ok":"warn");
  }catch(e){ show(String(e), "err"); }
}
function show(msg, cls){ out.className = "result " + (cls||""); out.textContent = msg; }
</script>
</body>
</html>
